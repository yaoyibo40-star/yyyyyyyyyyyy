<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>红楼梦 - 经典名著阅读网</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>

<header>
  <h1>经典名著阅读网</h1>
  <nav>
    <a href="index.html">首页</a>
    <a href="list.html">作品列表</a>
    <a href="zuozhejianjie.html">作者简介</a>
    <a href="readingrecord.html">阅读记录</a>
    <a href="javascript:history.back()">返回</a>
  </nav>
</header>

<main class="container">
  <div class="reader-container">
    <div class="reader-tools">
      <button onclick="changeFontSize(1)" title="增大字体">A+</button>
      <button onclick="changeFontSize(-1)" title="缩小字体">A-</button>
      <button onclick="resetFont()" title="恢复默认字体">默认字体</button>
      <button onclick="toggleMode()" title="切换夜间模式">🌙 夜间模式</button>
      <button onclick="window.print()" title="打印本页">🖨️ 打印</button>
      <button onclick="bookmarkPage()" title="添加书签">🔖 书签</button>
    </div>

    <div class="book-header">
      <h1>《红楼梦》</h1>
      <div class="book-meta">
        <span>作者：曹雪芹</span>
        <span>朝代：清代</span>
        <span>回数：一百二十回</span>
      </div>
    </div>

    <article id="content">
      <h2>第一回 甄士隐梦幻识通灵 贾雨村风尘怀闺秀</h2>
      
      <p>
        此开卷第一回也。作者自云：因曾历过一番梦幻之后，故将真事隐去，而借"通灵"之说，撰此《石头记》一书也。故曰"甄士隐"云云。但书中所记何事何人？自又云："今风尘碌碌，一事无成，忽念及当日所有之女子，一一细考较去，觉其行止见识，皆出于我之上。何我堂堂须眉，诚不若彼裙钗哉？实愧则有余，悔又无益之大无可如何之日也！"
      </p>
      
      <p>
        当此，则自欲将已往所赖天恩祖德，锦衣纨绔之时，饫甘餍肥之日，背父兄教育之恩，负师友规谈之德，以至今日一技无成，半生潦倒之罪，编述一集，以告天下人：我之罪固不免，然闺阁中本自历历有人，万不可因我之不肖，自护己短，一并使其泯灭也。虽今日之茅椽蓬牖，瓦灶绳床，其晨夕风露，阶柳庭花，亦未有妨我之襟怀笔墨者。虽我未学，下笔无文，又何妨用假语村言，敷演出一段故事来，亦可使闺阁昭传，复可悦世之目，破人愁闷，不亦宜乎？故曰"贾雨村"云云。
      </p>
      
      <p>
        列位看官：你道此书从何而来？说起根由虽近荒唐，细按则深有趣味。待在下将此来历注明，方使阅者了然不惑。
      </p>
      
      <p>
        原来女娲氏炼石补天之时，于大荒山无稽崖练成高经十二丈，方经二十四丈顽石三万六千五百零一块。娲皇氏只用了三万六千五百块，只单单剩了一块未用，便弃在此山青埂峰下。谁知此石自经煅炼之后，灵性已通，因见众石俱得补天，独自己无材不堪入选，遂自怨自叹，日夜悲号惭愧。
      </p>
      
      <p>
        一日，正当嗟悼之际，俄见一僧一道远远而来，生得骨格不凡，丰神迥异，说说笑笑来至峰下，坐于石边高谈快论。先是说些云山雾海神仙玄幻之事，后便说到红尘中荣华富贵。此石听了，不觉打动凡心，也想要到人间去享一享这荣华富贵，但自恨粗蠢，不得已，便口吐人言，向那僧道说道："大师，弟子蠢物，不能见礼了。适闻二位谈那人世间荣耀繁华，心切慕之。弟子质虽粗蠢，性却稍通，况见二师仙形道体，定非凡品，必有补天济世之材，利物济人之德。如蒙发一点慈心，携带弟子得入红尘，在那富贵场中，温柔乡里受享几年，自当永佩洪恩，万劫不忘也。"
      </p>
      
      <p>
        二仙师听毕，齐憨笑道："善哉，善哉！那红尘中有却有些乐事，但不能永远依恃，况又有'美中不足，好事多魔'八个字紧相连属，瞬息间则又乐极悲生，人非物换，究竟是到头一梦，万境归空，倒不如不去的好。"
      </p>
      
      <p>
        这石凡心已炽，那里听得进这话去，乃复苦求再四。二仙知不可强制，乃叹道："此亦静极思动，无中生有之数也。既如此，我们便携你去受享受享，只是到不得意时，切莫后悔。"石道："自然，自然。"那僧又道："若说你性灵，却又如此质蠢，并更无奇贵之处。如此也只好踮脚而已。也罢，我如今大施佛法助你助，待劫终之日，复还本质，以了此案。你道好否？"石头听了，感谢不尽。那僧便念咒书符，大展幻术，将一块大石登时变成一块鲜明莹洁的美玉，且又缩成扇坠大小的可佩可拿。那僧托于掌上，笑道："形体倒也是个宝物了！还只没有实在的好处，须得再镌上数字，使人一见便知是奇物方妙。然后携你到那昌明隆盛之邦，诗礼簪缨之族，花柳繁华地，温柔富贵乡去安身乐业。"石头听了，喜不能禁，乃问："不知赐了弟子那几件奇处，又不知携了弟子到何地方？望乞明示，使弟子不惑。"那僧笑道："你且莫问，日后自然明白的。"说着，便袖了这石，同那道人飘然而去，竟不知投奔何方何舍。
      </p>
      
      <p>
        后来，又不知过了几世几劫，因有个空空道人访道求仙，忽从这大荒山无稽崖青埂峰下经过，忽见一大块石上字迹分明，编述历历。空空道人乃从头一看，原来就是无材补天，幻形入世，蒙茫茫大士、渺渺真人携入红尘，历尽离合悲欢炎凉世态的一段故事。后面又有一首偈云：
      </p>
      
      <div class="poem">
        <p>无材可去补苍天，枉入红尘若许年。</p>
        <p>此系身前身后事，倩谁记去作奇传？</p>
      </div>
    </article>
    
    <div class="chapter-nav">
      <button onclick="alert('这是第一回，暂无上一回')" style="padding: 10px 25px; background-color: #666; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 0 10px; opacity: 0.6;" disabled>
        上一回
      </button>
      <span style="margin: 0 15px; color: #8b0000; font-weight: bold;">第一回</span>
      <button onclick="loadNextChapter()" style="padding: 10px 25px; background-color: #8b0000; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 0 10px;">
        第二回
      </button>
      <select onchange="jumpToChapter(this.value)" style="padding: 10px; margin-left: 20px; border-radius: 5px; border: 1px solid #ddd;">
        <option value="">跳转到...</option>
        <option value="1">第一回</option>
        <option value="2">第二回</option>
        <option value="3">第三回</option>
        <option value="5">第五回</option>
        <option value="10">第十回</option>
      </select>
    </div>
    
    <div class="reading-progress">
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="progress-text">阅读进度：<span id="progressPercent">0%</span></div>
    </div>
  </div>
</main>

<footer>
  <p>© 2025 经典名著阅读网 | 《红楼梦》是中国古典小说巅峰之作</p>
</footer>

<script>
  let fontSize = 18;
  let currentChapter = 1;
  
  function changeFontSize(step) {
    fontSize += step;
    if (fontSize < 12) fontSize = 12;
    if (fontSize > 30) fontSize = 30;
    document.getElementById("content").style.fontSize = fontSize + "px";
    localStorage.setItem('honglouFontSize', fontSize);
  }
  
  function resetFont() {
    fontSize = 18;
    document.getElementById("content").style.fontSize = "18px";
    localStorage.setItem('honglouFontSize', fontSize);
  }
  
  function toggleMode() {
    document.body.classList.toggle("dark");
    const isDark = document.body.classList.contains("dark");
    localStorage.setItem('darkMode', isDark);
    
    const btn = document.querySelector('.reader-tools button[onclick="toggleMode()"]');
    btn.textContent = isDark ? "☀️ 日间模式" : "🌙 夜间模式";
  }
  
  function bookmarkPage() {
    const chapter = document.querySelector("#content h2").textContent;
    const bookmarks = JSON.parse(localStorage.getItem('honglouBookmarks') || '[]');
    
    if (!bookmarks.includes(chapter)) {
      bookmarks.push(chapter);
      localStorage.setItem('honglouBookmarks', JSON.stringify(bookmarks));
      alert(`已添加书签：${chapter}`);
    } else {
      alert('本章节已在书签中');
    }
  }
  
  function loadNextChapter() {
    if (currentChapter < 120) {
      currentChapter++;
      document.getElementById("content").innerHTML = `
        <h2>第${currentChapter}回 贾夫人仙逝扬州城 冷子兴演说荣国府</h2>
        <p>正在加载第${currentChapter}回内容...</p>
        <p>（完整内容正在开发中，敬请期待）</p>
      `;
      updateChapterNav();
      updateProgress();
      
      // 模拟加载延迟
      setTimeout(() => {
        document.getElementById("content").innerHTML = `
          <h2>第${currentChapter}回 贾夫人仙逝扬州城 冷子兴演说荣国府</h2>
          <p>却说封肃因听见公差传唤，忙出来陪笑启问。那些人只嚷："快请出甄爷来！"封肃忙陪笑道："小人姓封，并不姓甄。只有当日小婿姓甄，今已出家一二年了，不知可是问他？"那些公差道："我们也不知什么'真''假'，因奉太爷之命来问。他既是你女婿，便带了你去亲见太爷面禀，省得乱跑。"</p>
          <p>说着，不容封肃多言，大家推拥他去了。封家人个个都惊慌，不知何兆。那天约二更时，只见封肃方回来，欢天喜地。众人忙问端的。他乃说道："原来本府新升的太爷姓贾名化，本贯胡州人氏，曾与女婿旧日相交。方才在咱门前过去，因见娇杏那丫头买线，所以他只当女婿移住于此。我一一将原故回明，那太爷倒伤感叹息了一回，又问外孙女儿，我说看灯丢了。太爷说：'不妨，我自使番役务必探访回来。'说了一回话，临走倒送了我二两银子。"</p>
          <p>甄家娘子听了，不免心中伤感。一宿无话。至次日，早有雨村遣人送了两封银子，四匹锦缎，答谢甄家娘子，又寄一封密书与封肃，转托问甄家娘子要那娇杏作二房。封肃喜的屁滚尿流，巴不得去奉承，便在女儿前一力撺掇成了，乘夜只用一乘小轿，便把娇杏送进去了。雨村欢喜，自不必说，乃封百金赠封肃，外谢甄家娘子许多物事，令其好生养赡，以待寻访女儿下落。封肃回家无话。</p>
        `;
      }, 800);
    }
  }
  
  function jumpToChapter(chapterNum) {
    if (!chapterNum) return;
    
    currentChapter = parseInt(chapterNum);
    document.getElementById("content").innerHTML = `
      <h2>第${currentChapter}回 内容加载中...</h2>
      <p>正在跳转到第${currentChapter}回，请稍候...</p>
    `;
    
    updateChapterNav();
    updateProgress();
    
    // 模拟加载
    setTimeout(() => {
      document.getElementById("content").innerHTML = `
        <h2>第${currentChapter}回 游幻境指迷十二钗 饮仙醪曲演红楼梦</h2>
        <p>这是第${currentChapter}回的预览内容。完整章节内容正在开发中，敬请期待完整版上线。</p>
        <p>《红楼梦》是中国古典文学巅峰之作，全书共一百二十回，以贾、史、王、薛四大家族的兴衰为背景，以贾宝玉与林黛玉、薛宝钗的爱情婚姻悲剧为主线，描绘了闺阁佳人的人生百态，展现了真正的人性美和悲剧美。</p>
      `;
    }, 1000);
  }
  
  function updateChapterNav() {
    const prevBtn = document.querySelector('.chapter-nav button:first-child');
    const nextBtn = document.querySelector('.chapter-nav button:nth-child(3)');
    const chapterSpan = document.querySelector('.chapter-nav span');
    
    chapterSpan.textContent = `第${currentChapter}回`;
    
    if (currentChapter === 1) {
      prevBtn.disabled = true;
      prevBtn.style.opacity = '0.6';
      prevBtn.textContent = '上一回';
    } else {
      prevBtn.disabled = false;
      prevBtn.style.opacity = '1';
      prevBtn.textContent = `第${currentChapter-1}回`;
      prevBtn.onclick = function() {
        currentChapter--;
        jumpToChapter(currentChapter.toString());
      };
    }
    
    if (currentChapter === 120) {
      nextBtn.disabled = true;
      nextBtn.style.opacity = '0.6';
      nextBtn.textContent = '下一回';
    } else {
      nextBtn.disabled = false;
      nextBtn.style.opacity = '1';
      nextBtn.textContent = `第${currentChapter+1}回`;
      nextBtn.onclick = loadNextChapter;
    }
  }
  
  function updateProgress() {
    const progress = (currentChapter / 120) * 100;
    document.getElementById("progressFill").style.width = `${progress}%`;
    document.getElementById("progressPercent").textContent = `${progress.toFixed(1)}%`;
  }
  
  // 初始化设置
  window.onload = function() {
    // 恢复字体大小
    const savedFontSize = localStorage.getItem('honglouFontSize');
    if (savedFontSize) {
      fontSize = parseInt(savedFontSize);
      document.getElementById("content").style.fontSize = fontSize + "px";
    }
    
    // 恢复夜间模式
    const isDarkMode = localStorage.getItem('darkMode') === 'true';
    if (isDarkMode) {
      document.body.classList.add("dark");
      const btn = document.querySelector('.reader-tools button[onclick="toggleMode()"]');
      if (btn) btn.textContent = "☀️ 日间模式";
    }
    
    // 初始化进度
    updateProgress();
    
    // 添加阅读进度监听
    window.addEventListener('scroll', function() {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const scrollPercent = (scrollTop / scrollHeight) * 100;
      
      if (scrollPercent > 0) {
        document.getElementById("progressFill").style.width = `${Math.min(100, scrollPercent)}%`;
        document.getElementById("progressPercent").textContent = `${Math.min(100, scrollPercent).toFixed(1)}%`;
      }
    });
  }
</script>

<style>
  .book-header {
    text-align: center;
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 1px solid #e0e0e0;
  }
  
  .book-header h1 {
    color: #8b0000;
    font-size: 2.5rem;
    margin-bottom: 10px;
  }
  
  .book-meta {
    display: flex;
    justify-content: center;
    gap: 20px;
    color: #666;
    font-size: 1rem;
  }
  
  .poem {
    background-color: #f9f3e9;
    padding: 20px;
    border-left: 4px solid #d4a76a;
    margin: 20px 0;
    font-style: italic;
    text-align: center;
    border-radius: 5px;
  }
  
  body.dark .poem {
    background-color: #3a3429;
    border-left-color: #b89446;
  }
  
  .reading-progress {
    margin-top: 40px;
    padding-top: 20px;
    border-top: 1px solid #e0e0e0;
  }
  
  .progress-bar {
    width: 100%;
    height: 8px;
    background-color: #e0e0e0;
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 10px;
  }
  
  .progress-fill {
    height: 100%;
    background-color: #8b0000;
    width: 0%;
    transition: width 0.3s ease;
  }
  
  .progress-text {
    text-align: center;
    color: #666;
    font-size: 0.9rem;
  }
  
  .chapter-nav {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 40px;
    padding-top: 20px;
    border-top: 1px solid #e0e0e0;
    flex-wrap: wrap;
    gap: 10px;
  }
</style>

</body>
</html>