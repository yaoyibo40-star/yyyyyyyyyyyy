<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>三国演义 - 经典名著阅读网</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>

<header>
  <h1>经典名著阅读网</h1>
  <nav>
    <a href="index.html">首页</a>
    <a href="list.html">作品列表</a>
        <a href="zuozhejianjie.html">作者简介</a>
    <a href="readingrecord.html">阅读记录</a>
    <a href="javascript:history.back()">返回</a>
  </nav>
</header>

<main class="container">
  <div class="reader-container">
    <div class="reader-tools">
      <button onclick="changeFontSize(1)" title="增大字体">A+</button>
      <button onclick="changeFontSize(-1)" title="缩小字体">A-</button>
      <button onclick="resetFont()" title="恢复默认字体">默认字体</button>
      <button onclick="toggleMode()" title="切换夜间模式">🌙 夜间模式</button>
      <button onclick="window.print()" title="打印本页">🖨️ 打印</button>
      <button onclick="bookmarkPage()" title="添加书签">🔖 书签</button>
      <button onclick="showCharacterMap()" title="人物关系图">🗺️ 人物图</button>
    </div>

    <div class="book-header">
      <h1>《三国演义》</h1>
      <div class="book-meta">
        <span>作者：罗贯中</span>
        <span>朝代：元末明初</span>
        <span>回数：一百二十回</span>
      </div>
    </div>

    <article id="content">
      <h2>第一回 宴桃园豪杰三结义 斩黄巾英雄首立功</h2>
      
      <p>
        话说天下大势，分久必合，合久必分。周末七国分争，并入于秦。及秦灭之后，楚、汉分争，又并入于汉。汉朝自高祖斩白蛇而起义，一统天下，后来光武中兴，传至献帝，遂分为三国。推其致乱之由，殆始于桓、灵二帝。桓帝禁锢善类，崇信宦官。及桓帝崩，灵帝即位，大将军窦武、太傅陈蕃共相辅佐。时有宦官曹节等弄权，窦武、陈蕃谋诛之，机事不密，反为所害，中涓自此愈横。
      </p>
      
      <p>
        建宁二年四月望日，帝御温德殿。方升座，殿角狂风骤起。只见一条大青蛇，从梁上飞将下来，蟠于椅上。帝惊倒，左右急救入宫，百官俱奔避。须臾，蛇不见了。忽然大雷大雨，加以冰雹，落到半夜方止，坏却房屋无数。建宁四年二月，洛阳地震；又海水泛溢，沿海居民，尽被大浪卷入海中。光和元年，雌鸡化雄。六月朔，黑气十余丈，飞入温德殿中。秋七月，有虹现于玉堂；五原山岸，尽皆崩裂。种种不祥，非止一端。
      </p>
      
      <p>
        帝下诏问群臣以灾异之由，议郎蔡邕上疏，以为蜺堕鸡化，乃妇寺干政之所致，言颇切直。帝览奏叹息，因起更衣。曹节在后窃视，悉宣告左右；遂以他事陷邕于罪，放归田里。后张让、赵忠、封谞、段珪、曹节、侯览、蹇硕、程旷、夏恽、郭胜十人朋比为奸，号为"十常侍"。帝尊信张让，呼为"阿父"。朝政日非，以致天下人心思乱，盗贼蜂起。
      </p>
      
      <p>
        时巨鹿郡有兄弟三人，一名张角，一名张宝，一名张梁。那张角本是个不第秀才，因入山采药，遇一老人，碧眼童颜，手执藜杖，唤角至一洞中，以天书三卷授之，曰："此名《太平要术》，汝得之，当代天宣化，普救世人；若萌异心，必获恶报。"角拜问姓名。老人曰："吾乃南华老仙也。"言讫，化阵清风而去。
      </p>
      
      <p>
        角得此书，晓夜攻习，能呼风唤雨，号为"太平道人"。中平元年正月内，疫气流行，张角散施符水，为人治病，自称"大贤良师"。角有徒弟五百余人，云游四方，皆能书符念咒。次后徒众日多，角乃立三十六方，大方万余人，小方六七千，各立渠帅，称为将军；讹言："苍天已死，黄天当立；岁在甲子，天下大吉。"令人各以白土书"甲子"二字于家中大门上。青、幽、徐、冀、荆、扬、兖、豫八州之人，家家侍奉大贤良师张角名字。角遣其党马元义，暗赍金帛，结交中涓封谞，以为内应。角与二弟商议曰："至难得者，民心也。今民心已顺，若不乘势取天下，诚为可惜。"遂一面私造黄旗，约期举事；一面使弟子唐周，驰书报封谞。唐周乃径赴省中告变。帝召大将军何进调兵擒马元义，斩之；次收封谞等一千人下狱。
      </p>
      
      <p>
        张角闻知事露，星夜举兵，自称"天公将军"，张宝称"地公将军"，张梁称"人公将军"。申言于众曰："今汉运将终，大圣人出。汝等皆宜顺天从正，以乐太平。"四方百姓，裹黄巾从张角反者四五十万。贼势浩大，官军望风而靡。何进奏帝火速降诏，令各处备御，讨贼立功。一面遣中郎将卢植、皇甫嵩、朱儁，各引精兵、分三路讨之。
      </p>
      
      <p>
        且说张角一军，前犯幽州界分。幽州太守刘焉，乃江夏竟陵人氏，汉鲁恭王之后也。当时闻得贼兵将至，召校尉邹靖计议。靖曰："贼兵众，我兵寡，明公宜作速招军应敌。"刘焉然其说，随即出榜招募义兵。
      </p>
      
      <p>
        榜文行到涿县，引出涿县中一个英雄。那人不甚好读书；性宽和，寡言语，喜怒不形于色；素有大志，专好结交天下豪杰；生得身长七尺五寸，两耳垂肩，双手过膝，目能自顾其耳，面如冠玉，唇若涂脂；中山靖王刘胜之后，汉景帝阁下玄孙，姓刘名备，字玄德。昔刘胜之子刘贞，汉武时封涿鹿亭侯，后坐酎金失侯，因此遗这一枝在涿县。玄德祖刘雄，父刘弘。弘曾举孝廉，亦尝作吏，早丧。玄德幼孤，事母至孝；家贫，贩屦织席为业。家住本县楼桑村。其家之东南，有一大桑树，高五丈余，遥望之，童童如车盖。相者云："此家必出贵人。"玄德幼时，与乡中小儿戏于树下，曰："我为天子，当乘此车盖。"叔父刘元起奇其言，曰："此儿非常人也！"因见玄德家贫，常资给之。年十五岁，母使游学，尝师事郑玄、卢植，与公孙瓒等为友。
      </p>
      
      <p>
        及刘焉发榜招军时，玄德年已二十八岁矣。当日见了榜文，慨然长叹。随后一人厉声言曰："大丈夫不与国家出力，何故长叹？"玄德回视其人，身长八尺，豹头环眼，燕颔虎须，声若巨雷，势如奔马。玄德见他形貌异常，问其姓名。其人曰："某姓张名飞，字翼德。世居涿郡，颇有庄田，卖酒屠猪，专好结交天下豪杰。恰才见公看榜而叹，故此相问。"玄德曰："我本汉室宗亲，姓刘，名备。今闻黄巾倡乱，有志欲破贼安民，恨力不能，故长叹耳。"飞曰："吾颇有资财，当招募乡勇，与公同举大事，如何。"玄德甚喜，遂与同入村店中饮酒。
      </p>
    </article>
    
    <div class="character-notes">
      <h3>📖 本回人物简介</h3>
      <div class="characters">
        <div class="character">
          <strong>刘备</strong>：字玄德，汉室宗亲，三国时期蜀汉开国皇帝。
        </div>
        <div class="character">
          <strong>张飞</strong>：字翼德，刘备义弟，勇猛善战，与关羽并称"万人敌"。
        </div>
        <div class="character">
          <strong>张角</strong>：黄巾起义领袖，太平道创始人，自称"天公将军"。
        </div>
      </div>
    </div>
    
    <div class="chapter-nav">
      <button onclick="alert('这是第一回，暂无上一回')" style="padding: 10px 25px; background-color: #666; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 0 10px; opacity: 0.6;" disabled>
        上一回
      </button>
      <span style="margin: 0 15px; color: #8b0000; font-weight: bold;">第一回</span>
      <button onclick="loadNextChapter()" style="padding: 10px 25px; background-color: #8b0000; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 0 10px;">
        第二回
      </button>
      <select onchange="jumpToChapter(this.value)" style="padding: 10px; margin-left: 20px; border-radius: 5px; border: 1px solid #ddd;">
        <option value="">跳转到...</option>
        <option value="1">第一回</option>
        <option value="2">第二回</option>
        <option value="5">第五回（三英战吕布）</option>
        <option value="21">第二十一回（煮酒论英雄）</option>
        <option value="37">第三十七回（三顾茅庐）</option>
      </select>
    </div>
    
    <div class="reading-progress">
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="progress-text">阅读进度：<span id="progressPercent">0%</span></div>
    </div>
  </div>
</main>

<footer>
  <p>© 2025 经典名著阅读网 | 《三国演义》是中国第一部长篇章回体历史演义小说</p>
</footer>

<script>
  let fontSize = 18;
  let currentChapter = 1;
  
  function changeFontSize(step) {
    fontSize += step;
    if (fontSize < 12) fontSize = 12;
    if (fontSize > 30) fontSize = 30;
    document.getElementById("content").style.fontSize = fontSize + "px";
    localStorage.setItem('sanguoFontSize', fontSize);
  }
  
  function resetFont() {
    fontSize = 18;
    document.getElementById("content").style.fontSize = "18px";
    localStorage.setItem('sanguoFontSize', fontSize);
  }
  
  function toggleMode() {
    document.body.classList.toggle("dark");
    const isDark = document.body.classList.contains("dark");
    localStorage.setItem('darkMode', isDark);
    
    const btn = document.querySelector('.reader-tools button[onclick="toggleMode()"]');
    btn.textContent = isDark ? "☀️ 日间模式" : "🌙 夜间模式";
  }
  
  function bookmarkPage() {
    const chapter = document.querySelector("#content h2").textContent;
    const bookmarks = JSON.parse(localStorage.getItem('sanguoBookmarks') || '[]');
    
    if (!bookmarks.includes(chapter)) {
      bookmarks.push(chapter);
      localStorage.setItem('sanguoBookmarks', JSON.stringify(bookmarks));
      alert(`已添加书签：${chapter}`);
    } else {
      alert('本章节已在书签中');
    }
  }
  
  function showCharacterMap() {
    const modal = document.createElement('div');
    modal.style.cssText = `
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 2000;
    `;
    
    modal.innerHTML = `
      <div style="background-color: white; padding: 30px; border-radius: 10px; max-width: 800px; max-height: 80vh; overflow-y: auto;">
        <h2 style="color: #8b0000; margin-bottom: 20px;">三国主要人物关系图</h2>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
          <div style="border: 1px solid #ddd; padding: 15px; border-radius: 5px;">
            <h3 style="color: #8b0000; margin-top: 0;">蜀汉</h3>
            <p><strong>刘备</strong>：蜀汉昭烈帝</p>
            <p><strong>关羽</strong>：五虎上将之首</p>
            <p><strong>张飞</strong>：五虎上将</p>
            <p><strong>诸葛亮</strong>：丞相，卧龙</p>
            <p><strong>赵云</strong>：五虎上将</p>
          </div>
          <div style="border: 1px solid #ddd; padding: 15px; border-radius: 5px;">
            <h3 style="color: #8b0000; margin-top: 0;">曹魏</h3>
            <p><strong>曹操</strong>：魏武帝</p>
            <p><strong>曹丕</strong>：魏文帝</p>
            <p><strong>司马懿</strong>：晋宣帝</p>
            <p><strong>夏侯惇</strong>：大将</p>
            <p><strong>典韦</strong>：护卫</p>
          </div>
          <div style="border: 1px solid #ddd; padding: 15px; border-radius: 5px;">
            <h3 style="color: #8b0000; margin-top: 0;">东吴</h3>
            <p><strong>孙权</strong>：吴大帝</p>
            <p><strong>周瑜</strong>：大都督</p>
            <p><strong>鲁肃</strong>：战略家</p>
            <p><strong>吕蒙</strong>：大将</p>
            <p><strong>陆逊</strong>：大都督</p>
          </div>
        </div>
        <div style="text-align: center; margin-top: 20px;">
          <button onclick="this.parentElement.parentElement.remove()" style="padding: 10px 20px; background-color: #8b0000; color: white; border: none; border-radius: 5px; cursor: pointer;">
            关闭
          </button>
        </div>
      </div>
    `;
    
    document.body.appendChild(modal);
  }
  
  function loadNextChapter() {
    if (currentChapter < 120) {
      currentChapter++;
      document.getElementById("content").innerHTML = `
        <h2>第${currentChapter}回 张翼德怒鞭督邮 何国舅谋诛宦竖</h2>
        <p>正在加载第${currentChapter}回内容...</p>
        <p>（完整内容正在开发中，敬请期待）</p>
      `;
      updateChapterNav();
      updateProgress();
      
      // 模拟加载延迟
      setTimeout(() => {
        document.getElementById("content").innerHTML = `
          <h2>第${currentChapter}回 张翼德怒鞭督邮 何国舅谋诛宦竖</h2>
          <p>且说董卓字仲颖，陇西临洮人也，官拜河东太守，自来骄傲。当日怠慢了玄德，张飞性发，便欲杀之。玄德与关公急止之曰："他是朝廷命官，岂可擅杀？"飞曰："若不杀这厮，反要在他部下听令，其实不甘！二兄要便住在此，我自投别处去也！"玄德曰："我三人义同生死，岂可相离？不若都投别处去便了。"飞曰："若如此，稍解吾恨。"</p>
          <p>于是三人连夜引军来投朱儁。儁待之甚厚，合兵一处，进讨张宝。是时曹操自跟皇甫嵩讨张梁，大战于曲阳。这里朱儁进攻张宝。张宝引贼众八九万，屯于山后。儁令玄德为其先锋，与贼对敌。张宝遣副将高升出马搦战，玄德使张飞击之。飞纵马挺矛，与升交战，不数合，刺升落马。玄德麾军直冲过去。张宝就马上披发仗剑，作起妖法。只见风雷大作，一股黑气从天而降，黑气中似有无限人马杀来。玄德连忙回军，军中大乱。</p>
        `;
      }, 800);
    }
  }
  
  function jumpToChapter(chapterNum) {
    if (!chapterNum) return;
    
    currentChapter = parseInt(chapterNum);
    document.getElementById("content").innerHTML = `
      <h2>第${currentChapter}回 内容加载中...</h2>
      <p>正在跳转到第${currentChapter}回，请稍候...</p>
    `;
    
    updateChapterNav();
    updateProgress();
    
    // 模拟加载
    setTimeout(() => {
      document.getElementById("content").innerHTML = `
        <h2>第${currentChapter}回 经典章节预览</h2>
        <p>《三国演义》是中国第一部长篇章回体历史演义小说，描写了从东汉末年到西晋初年之间近百年的历史风云，以描写战争为主，诉说了东汉末年的群雄割据混战和魏、蜀、吴三国之间的政治和军事斗争，最终司马炎一统三国，建立晋朝的故事。</p>
        <p>全书反映了三国时代各类社会斗争与矛盾的转化，并概括了这一时代的历史巨变，塑造了一群叱咤风云的三国英雄人物。</p>
      `;
    }, 1000);
  }
  
  function updateChapterNav() {
    const prevBtn = document.querySelector('.chapter-nav button:first-child');
    const nextBtn = document.querySelector('.chapter-nav button:nth-child(3)');
    const chapterSpan = document.querySelector('.chapter-nav span');
    
    chapterSpan.textContent = `第${currentChapter}回`;
    
    if (currentChapter === 1) {
      prevBtn.disabled = true;
      prevBtn.style.opacity = '0.6';
      prevBtn.textContent = '上一回';
    } else {
      prevBtn.disabled = false;
      prevBtn.style.opacity = '1';
      prevBtn.textContent = `第${currentChapter-1}回`;
      prevBtn.onclick = function() {
        currentChapter--;
        jumpToChapter(currentChapter.toString());
      };
    }
    
    if (currentChapter === 120) {
      nextBtn.disabled = true;
      nextBtn.style.opacity = '0.6';
      nextBtn.textContent = '下一回';
    } else {
      nextBtn.disabled = false;
      nextBtn.style.opacity = '1';
      nextBtn.textContent = `第${currentChapter+1}回`;
      nextBtn.onclick = loadNextChapter;
    }
  }
  
  function updateProgress() {
    const progress = (currentChapter / 120) * 100;
    document.getElementById("progressFill").style.width = `${progress}%`;
    document.getElementById("progressPercent").textContent = `${progress.toFixed(1)}%`;
  }
  
  // 初始化设置
  window.onload = function() {
    // 恢复字体大小
    const savedFontSize = localStorage.getItem('sanguoFontSize');
    if (savedFontSize) {
      fontSize = parseInt(savedFontSize);
      document.getElementById("content").style.fontSize = fontSize + "px";
    }
    
    // 恢复夜间模式
    const isDarkMode = localStorage.getItem('darkMode') === 'true';
    if (isDarkMode) {
      document.body.classList.add("dark");
      const btn = document.querySelector('.reader-tools button[onclick="toggleMode()"]');
      if (btn) btn.textContent = "☀️ 日间模式";
    }
    
    // 初始化进度
    updateProgress();
    
    // 添加阅读进度监听
    window.addEventListener('scroll', function() {
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const scrollPercent = (scrollTop / scrollHeight) * 100;
      
      if (scrollPercent > 0) {
        document.getElementById("progressFill").style.width = `${Math.min(100, scrollPercent)}%`;
        document.getElementById("progressPercent").textContent = `${Math.min(100, scrollPercent).toFixed(1)}%`;
      }
    });
  }
</script>

<style>
  .book-header {
    text-align: center;
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 1px solid #e0e0e0;
  }
  
  .book-header h1 {
    color: #8b0000;
    font-size: 2.5rem;
    margin-bottom: 10px;
  }
  
  .book-meta {
    display: flex;
    justify-content: center;
    gap: 20px;
    color: #666;
    font-size: 1rem;
  }
  
  .character-notes {
    background-color: #f0f7ff;
    padding: 20px;
    border-radius: 10px;
    margin-top: 30px;
    border-left: 4px solid #3498db;
  }
  
  body.dark .character-notes {
    background-color: #2a3a4a;
    border-left-color: #2980b9;
  }
  
  .character-notes h3 {
    color: #2c3e50;
    margin-top: 0;
    margin-bottom: 15px;
  }
  
  body.dark .character-notes h3 {
    color: #ecf0f1;
  }
  
  .characters {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 10px;
  }
  
  .character {
    padding: 10px;
    background-color: rgba(255, 255, 255, 0.7);
    border-radius: 5px;
  }
  
  body.dark .character {
    background-color: rgba(0, 0, 0, 0.2);
  }
  
  .reading-progress {
    margin-top: 40px;
    padding-top: 20px;
    border-top: 1px solid #e0e0e0;
  }
  
  .progress-bar {
    width: 100%;
    height: 8px;
    background-color: #e0e0e0;
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 10px;
  }
  
  .progress-fill {
    height: 100%;
    background-color: #8b0000;
    width: 0%;
    transition: width 0.3s ease;
  }
  
  .progress-text {
    text-align: center;
    color: #666;
    font-size: 0.9rem;
  }
  
  .chapter-nav {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 40px;
    padding-top: 20px;
    border-top: 1px solid #e0e0e0;
    flex-wrap: wrap;
    gap: 10px;
  }
</style>

</body>
</html>